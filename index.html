<!DOCTYPE html>
<html lang="en-GB">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BloomShare - UK Cut Flower Collective</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2c5f2d;
            --secondary: #97bc62;
            --accent: #ff6b6b;
            --light: #f7f9f7;
            --dark: #1a1a1a;
            --shadow: 0 2px 10px rgba(0,0,0,0.1);
            --warning: #ffa500;
            --success: #4caf50;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .phone-container {
            width: 100%;
            max-width: 390px;
            height: 844px;
            background: white;
            border-radius: 40px;
            overflow: hidden;
            box-shadow: 0 30px 60px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .status-bar {
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            font-size: 14px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            text-align: center;
        }

        .app-header h1 {
            font-size: 28px;
            margin-bottom: 5px;
            font-weight: 700;
        }

        .app-header .tagline {
            font-size: 13px;
            opacity: 0.95;
            font-style: italic;
            line-height: 1.4;
        }

        .navigation {
            display: flex;
            background: white;
            border-bottom: 1px solid #e0e0e0;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .navigation::-webkit-scrollbar {
            display: none;
        }

        .nav-item {
            flex: 0 0 auto;
            padding: 12px 15px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
            font-size: 13px;
            font-weight: 500;
            color: #666;
            white-space: nowrap;
        }

        .nav-item.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
            background: rgba(44, 95, 45, 0.05);
        }

        .content-area {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: var(--light);
        }

        .screen {
            display: none;
            animation: fadeIn 0.3s;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .welcome-card h2 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 22px;
        }

        .eco-score-display {
            background: linear-gradient(135deg, #56ab2f, #a8e063);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .eco-score-number {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .eco-score-label {
            font-size: 14px;
            opacity: 0.95;
        }

        .profile-card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .profile-info h3 {
            color: var(--primary);
            margin-bottom: 5px;
        }

        .profile-location {
            color: #666;
            font-size: 14px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 14px;
        }

        .form-group input, .form-group textarea, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--secondary);
        }

        .specialty-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .tag {
            padding: 8px 15px;
            background: #f0f0f0;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            border: 2px solid transparent;
        }

        .tag.selected {
            background: var(--secondary);
            color: white;
            border-color: var(--primary);
        }

        .btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s, box-shadow 0.3s;
            width: 100%;
            margin-top: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.2);
        }

        .btn-secondary {
            background: #f0f0f0;
            color: var(--primary);
        }

        .btn-small {
            width: auto;
            padding: 10px 20px;
            font-size: 14px;
        }

        .flower-card {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.3s;
        }

        .flower-card:hover {
            transform: translateY(-3px);
        }

        .flower-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .flower-emoji {
            font-size: 24px;
        }

        .flower-detail {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .flower-detail.show {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 800px; }
        }

        .calendar-view {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .calendar-day:hover {
            background: var(--secondary);
            color: white;
        }

        .calendar-day.has-event {
            background: var(--primary);
            color: white;
            font-weight: bold;
        }

        .journal-entry {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: var(--shadow);
            position: relative;
        }

        .journal-date {
            color: #999;
            font-size: 12px;
            margin-bottom: 10px;
        }

        .journal-content {
            color: var(--dark);
            line-height: 1.6;
        }

        .delete-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
        }

        .add-button {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent), #ff8787);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 30px;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            transition: transform 0.3s;
            z-index: 1000;
        }

        .add-button:hover {
            transform: scale(1.1) rotate(90deg);
        }

        .eco-badge {
            background: linear-gradient(135deg, #56ab2f, #a8e063);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .eco-nudge {
            background: linear-gradient(135deg, var(--warning), #ffcc00);
            color: white;
            padding: 12px;
            border-radius: 10px;
            margin-top: 15px;
            font-size: 14px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .share-button {
            background: #25D366;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            border: none;
            cursor: pointer;
            font-size: 14px;
            margin-top: 15px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: transform 0.3s;
        }

        .share-button:hover {
            transform: scale(1.05);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 2000;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            animation: modalSlide 0.3s;
        }

        @keyframes modalSlide {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .close-modal {
            float: right;
            font-size: 24px;
            cursor: pointer;
            color: #999;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 28px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
            margin-top: 5px;
        }

        .task-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 12px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .task-info h4 {
            color: var(--primary);
            margin-bottom: 5px;
        }

        .task-assignee {
            color: #666;
            font-size: 14px;
        }

        .task-status {
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
        }

        .task-status.pending {
            background: #fff3cd;
            color: #856404;
        }

        .task-status.complete {
            background: #d4edda;
            color: #155724;
        }

        .photo-upload-area {
            border: 2px dashed var(--secondary);
            border-radius: 15px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }

        .photo-upload-area:hover {
            background: rgba(151, 188, 98, 0.1);
            border-color: var(--primary);
        }

        .photo-upload-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .ai-result {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
        }

        .ai-result h3 {
            margin-bottom: 10px;
        }

        .pollinator-map {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .map-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .map-cell {
            aspect-ratio: 1;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 20px;
        }

        .map-cell.pollinator {
            background: rgba(151, 188, 98, 0.2);
            border-color: var(--secondary);
        }

        .map-cell:hover {
            background: rgba(151, 188, 98, 0.3);
        }

        .resource-share {
            background: #fff3cd;
            border-left: 4px solid var(--warning);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .resource-share h4 {
            color: #856404;
            margin-bottom: 5px;
        }

        .resource-share p {
            color: #6c757d;
            font-size: 14px;
        }

        .profile-setup {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: var(--shadow);
        }

        .event-list {
            margin-top: 20px;
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="phone-container">
        <div class="status-bar">
            <span id="time">9:41</span>
            <span>üåø BloomShare</span>
            <span>100%</span>
        </div>
        
        <div class="app-header">
            <h1>üå∑ BloomShare</h1>
            <div class="tagline">In bloom, they stand as earthly art,<br>Divine brushstrokes on Nature's page:<br>Each petal, a heartbeat apart,<br>United in the vast cosmic sage.</div>
        </div>
        
        <div class="navigation">
            <div class="nav-item active" onclick="showScreen('home', this)">Home</div>
            <div class="nav-item" onclick="showScreen('flowers', this)">Flower Guide</div>
            <div class="nav-item" onclick="showScreen('calendar', this)">Calendar</div>
            <div class="nav-item" onclick="showScreen('journal', this)">Journal</div>
            <div class="nav-item" onclick="showScreen('tasks', this)">Tasks</div>
            <div class="nav-item" onclick="showScreen('profile', this)">Profile</div>
        </div>
        
        <div class="content-area">
            <!-- Home Screen -->
            <div id="home" class="screen active">
                <div class="eco-score-display">
                    <div class="eco-score-number" id="ecoScore">92/100</div>
                    <div class="eco-score-label">Your Eco Score - Outstanding! üå±</div>
                </div>

                <div class="welcome-card">
                    <h2>Welcome back, <span id="userName">Sarah</span>! üåª</h2>
                    <p>Your garden is thriving naturally - zero chemicals, 100% permaculture!</p>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="flowersGrown">127</div>
                            <div class="stat-label">Flowers Grown</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number">¬£<span id="moneySaved">458</span></div>
                            <div class="stat-label">Saved This Season</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number"><span id="waterSaved">340</span>L</div>
                            <div class="stat-label">Rainwater Used</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="pollinators">23</div>
                            <div class="stat-label">Pollinator Species</div>
                        </div>
                    </div>
                </div>

                <div class="pollinator-map">
                    <h3>üêù Your Pollinator Zone Map</h3>
                    <div class="map-grid" id="pollinatorMap">
                        <div class="map-cell pollinator">üåª</div>
                        <div class="map-cell">-</div>
                        <div class="map-cell pollinator">üå∫</div>
                        <div class="map-cell">-</div>
                        <div class="map-cell">-</div>
                        <div class="map-cell pollinator">üåº</div>
                        <div class="map-cell">-</div>
                        <div class="map-cell pollinator">üå∏</div>
                        <div class="map-cell pollinator">üå∑</div>
                        <div class="map-cell">-</div>
                        <div class="map-cell pollinator">üåª</div>
                        <div class="map-cell">-</div>
                    </div>
                    <p style="margin-top: 10px; font-size: 14px; color: #666;">Tap empty spaces to plan bee-friendly flowers</p>
                </div>

                <div class="profile-setup">
                    <h3>Quick Actions</h3>
                    <button class="btn" onclick="showScreen('flowers', document.querySelector('.nav-item:nth-child(2)'))">Browse Flower Guides</button>
                    <button class="btn" onclick="addJournalEntry()">Log Today's Harvest</button>
                    <button class="share-button" onclick="shareToWhatsApp()">
                        üì± Share to WhatsApp Group
                    </button>
                </div>
            </div>
            
            <!-- Flowers Screen -->
            <div id="flowers" class="screen">
                <div class="photo-upload-area" onclick="showPhotoUpload()">
                    <div class="photo-upload-icon">üì∏</div>
                    <h3>Add New Flower</h3>
                    <p>Take a photo and our AI will identify it!</p>
                </div>

                <div id="customFlowers"></div>

                <div class="flower-card" onclick="toggleFlowerDetail('cornflower')">
                    <h3><span class="flower-emoji">üåæ</span> Cornflowers (Centaurea cyanus)</h3>
                    <p>Classic UK cutting flower - hardy & pollinator-friendly</p>
                    <div id="cornflower-detail" class="flower-detail">
                        <p><strong>üå± When to Sow:</strong> Direct sow outdoors: April‚ÄìJune</p>
                        <p><strong>üíß Where to Plant:</strong> Full sun. Space 15‚Äì20cm apart.</p>
                        <p><strong>‚úÇÔ∏è When to Harvest:</strong> Cut when buds are just starting to open</p>
                        <p><strong>üíê Vase Life:</strong> Lasts 7‚Äì10 days</p>
                        <p><strong>üåø Permaculture Tip:</strong> Let some self-seed for next year's free flowers!</p>
                        <p><strong>üêù Companion Planting:</strong> Plant near beans - they fix nitrogen naturally</p>
                        <div class="eco-badge">
                            ‚ôªÔ∏è Native wildflower - Saved ¬£8.50 vs shop-bought
                        </div>
                        <button class="share-button">Share Growing Tips</button>
                    </div>
                </div>
                
                <div class="flower-card" onclick="toggleFlowerDetail('sweetpea')">
                    <h3><span class="flower-emoji">üå∏</span> Sweet Peas (Lathyrus odoratus)</h3>
                    <p>Fragrant climbers perfect for British gardens</p>
                    <div id="sweetpea-detail" class="flower-detail">
                        <p><strong>üå± When to Sow:</strong> October (autumn) or March (spring)</p>
                        <p><strong>üíß Where to Plant:</strong> Rich soil, full sun to partial shade</p>
                        <p><strong>‚úÇÔ∏è When to Harvest:</strong> Pick regularly for more blooms</p>
                        <p><strong>üíê Vase Life:</strong> 5‚Äì7 days with daily water changes</p>
                        <p><strong>üåø Permaculture Tip:</strong> Nitrogen fixer - improves soil naturally!</p>
                        <p><strong>üíß Water-Wise:</strong> Deep water weekly, mulch to retain moisture</p>
                        <div class="eco-badge">
                            ‚ôªÔ∏è Soil improver - Adds nitrogen naturally
                        </div>
                        <button class="share-button">Share Growing Tips</button>
                    </div>
                </div>
            </div>
            
            <!-- Calendar Screen -->
            <div id="calendar" class="screen">
                <div class="calendar-view">
                    <div class="calendar-header">
                        <h3>June 2025</h3>
                        <button class="btn btn-small" onclick="showEventModal()">Add Event</button>
                    </div>
                    <div class="calendar-grid" id="calendarGrid">
                        <!-- Calendar will be generated by JavaScript -->
                    </div>
                </div>
                
                <div class="event-list">
                    <h3>Upcoming Events</h3>
                    <div id="eventsList"></div>
                </div>
            </div>
            
            <!-- Tasks Screen -->
            <div id="tasks" class="screen">
                <h3>üóÇÔ∏è Shared Plot Tasks</h3>
                <button class="btn btn-small" onclick="showTaskModal()" style="margin-bottom: 20px;">Add New Task</button>
                
                <div id="tasksList"></div>
                
                <h3 style="margin-top: 30px;">üì¶ Resource Sharing</h3>
                
                <button class="btn btn-small" onclick="showResourceModal()" style="margin-bottom: 20px;">Share Resource</button>
                
                <div id="resourcesList"></div>
            </div>
            
            <!-- Journal Screen -->
            <div id="journal" class="screen">
                <h3>Your Bloom Journal üìñ</h3>
                <button class="btn btn-small" onclick="showAddModal()" style="margin-bottom: 20px;">Add Entry</button>
                
                <div id="journalEntries"></div>
            </div>
            
            <!-- Profile Screen -->
            <div id="profile" class="screen">
                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-avatar">üë©‚Äçüåæ</div>
                        <div class="profile-info">
                            <h3 id="profileName">Sarah Thompson</h3>
                            <div class="profile-location">üìç <span id="profileLocation">Brighton, East Sussex</span></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="profileNameInput" value="Sarah Thompson" />
                    </div>
                    
                    <div class="form-group">
                        <label>Location</label>
                        <input type="text" id="profileLocationInput" value="Brighton, East Sussex" />
                    </div>
                    
                    <div class="form-group">
                        <label>Bio</label>
                        <textarea id="profileBio" rows="3">I grow cosmos for my mum's wedding bouquets. Love rainwater harvesting! Been growing chemical-free for 3 years now.</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label>Growing Experience</label>
                        <select id="profileExperience">
                            <option>Beginner (< 1 year)</option>
                            <option>Intermediate (1-3 years)</option>
                            <option selected>Experienced (3-5 years)</option>
                            <option>Expert (5+ years)</option>
                        </select>
                    </div>
                    
                    <button class="btn" onclick="saveProfile()">Save Profile</button>
                </div>
                
                <div class="eco-badge" style="margin-top: 20px;">
                    üèÜ Achievements: <span id="achievements">Soil Hero ‚Ä¢ Pollinator Champion</span>
                </div>
            </div>
        </div>
        
        <div class="add-button" onclick="showAddModal()">+</div>
        
        <!-- Journal Entry Modal -->
        <div id="addModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <h2>Add New Entry</h2>
                <div class="form-group">
                    <label>What happened today?</label>
                    <textarea id="journalText" rows="4" placeholder="First bloom, harvest, planting..."></textarea>
                </div>
                <div class="form-group">
                    <label>Flower Type</label>
                    <select id="flowerType">
                        <option>Cornflower</option>
                        <option>Sweet Pea</option>
                        <option>Zinnia</option>
                        <option>Cosmos</option>
                        <option>Dahlia</option>
                        <option>Sunflower</option>
                        <option>Foxglove</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Any treatments used?</label>
                    <input type="text" id="treatmentInput" placeholder="Compost, neem oil, water..." />
                </div>
                <button class="btn" onclick="saveEntry()">Save Entry</button>
            </div>
        </div>
        
        <!-- Event Modal -->
        <div id="eventModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeEventModal()">&times;</span>
                <h2>Add Calendar Event</h2>
                <div class="form-group">
                    <label>Event Title</label>
                    <input type="text" id="eventTitle" placeholder="e.g., Plant sweet peas" />
                </div>
                <div class="form-group">
                    <label>Date</label>
                    <input type="date" id="eventDate" />
                </div>
                <div class="form-group">
                    <label>Type</label>
                    <select id="eventType">
                        <option>üü¢ Planting</option>
                        <option>üîµ Watering</option>
                        <option>üü° Weeding</option>
                        <option>üü£ Harvesting</option>
                        <option>üå± Workshop</option>
                    </select>
                </div>
                <button class="btn" onclick="saveEvent()">Save Event</button>
            </div>
        </div>
        
        <!-- Task Modal -->
        <div id="taskModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeTaskModal()">&times;</span>
                <h2>Add New Task</h2>
                <div class="form-group">
                    <label>Task Description</label>
                    <input type="text" id="taskDescription" placeholder="e.g., Water dahlia beds" />
                </div>
                <div class="form-group">
                    <label>Assigned To</label>
                    <input type="text" id="taskAssignee" placeholder="e.g., John" />
                </div>
                <div class="form-group">
                    <label>Due Date</label>
                    <input type="date" id="taskDue" />
                </div>
                <button class="btn" onclick="saveTask()">Save Task</button>
            </div>
        </div>
        
        <!-- Resource Modal -->
        <div id="resourceModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeResourceModal()">&times;</span>
                <h2>Share Resource</h2>
                <div class="form-group">
                    <label>Resource Type</label>
                    <select id="resourceType">
                        <option>üéç Available</option>
                        <option>üå± Needed</option>
                        <option>üíß Reminder</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Resource Description</label>
                    <input type="text" id="resourceTitle" placeholder="e.g., 50 bamboo stakes" />
                </div>
                <div class="form-group">
                    <label>Details</label>
                    <textarea id="resourceDetails" rows="2" placeholder="Additional information..."></textarea>
                </div>
                <button class="btn" onclick="saveResource()">Share Resource</button>
            </div>
        </div>
        
        <!-- Photo Upload Modal -->
        <div id="photoModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closePhotoModal()">&times;</span>
                <h2>ü§ñ AI Flower Identifier</h2>
                <div class="photo-upload-area" id="photoUploadArea">
                    <div class="photo-upload-icon">üì∏</div>
                    <p>Click to take photo or upload</p>
                </div>
                <div class="ai-result" style="display: none;" id="aiResult">
                    <h3>Identified: <span id="flowerName">Sweet William</span></h3>
                    <p id="flowerDesc">Dianthus barbatus - A cottage garden favourite!</p>
                    <button class="btn" style="background: white; color: var(--primary);" onclick="addToGuide()">Add to Flower Guide</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ALL JAVASCRIPT AT THE END -->
    <script>
        // Initialize app data
        let appData = {
            profile: {
                name: 'Sarah Thompson',
                location: 'Brighton, East Sussex',
                bio: 'I grow cosmos for my mum\'s wedding bouquets. Love rainwater harvesting!',
                experience: 'Experienced (3-5 years)'
            },
            stats: {
                ecoScore: 92,
                flowersGrown: 127,
                moneySaved: 458,
                waterSaved: 340,
                pollinators: 23
            },
            journal: [],
            events: [],
            tasks: [],
            resources: [],
            customFlowers: []
        };

        // Load data from localStorage
        function loadData() {
            const saved = localStorage.getItem('bloomshareData');
            if (saved) {
                appData = JSON.parse(saved);
                updateUI();
            }
            loadJournal();
            loadEvents();
            loadTasks();
            loadResources();
        }

        // Save data to localStorage
        function saveData() {
            localStorage.setItem('bloomshareData', JSON.stringify(appData));
        }

        // Update UI with saved data
        function updateUI() {
            // Update profile
            document.getElementById('userName').textContent = appData.profile.name.split(' ')[0];
            document.getElementById('profileName').textContent = appData.profile.name;
            document.getElementById('profileLocation').textContent = appData.profile.location;
            document.getElementById('profileNameInput').value = appData.profile.name;
            document.getElementById('profileLocationInput').value = appData.profile.location;
            document.getElementById('profileBio').value = appData.profile.bio;
            document.getElementById('profileExperience').value = appData.profile.experience;
            
            // Update stats
            document.getElementById('ecoScore').textContent = appData.stats.ecoScore + '/100';
            document.getElementById('flowersGrown').textContent = appData.stats.flowersGrown;
            document.getElementById('moneySaved').textContent = appData.stats.moneySaved;
            document.getElementById('waterSaved').textContent = appData.stats.waterSaved;
            document.getElementById('pollinators').textContent = appData.stats.pollinators;
        }

        // Screen navigation
        function showScreen(screenId, element) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            
            const targetScreen = document.getElementById(screenId);
            if (targetScreen) {
                targetScreen.classList.add('active');
            }
            
            document.querySelectorAll('.nav-item').forEach(nav => {
                nav.classList.remove('active');
            });
            
            if (element) {
                element.classList.add('active');
            }
            
            // Generate calendar if showing calendar screen
            if (screenId === 'calendar') {
                generateCalendar();
            }
        }
        
        // Toggle flower details
        function toggleFlowerDetail(flowerId) {
            const detail = document.getElementById(flowerId + '-detail');
            if (detail) {
                detail.classList.toggle('show');
            }
        }
        
        // WhatsApp sharing
        function shareToWhatsApp() {
            const message = `Check out my BloomShare progress! üå∑\n\nFlowers grown: ${appData.stats.flowersGrown}\nMoney saved: ¬£${appData.stats.moneySaved}\nEco Score: ${appData.stats.ecoScore}/100\n\nGrowing chemical-free together!`;
            const url = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }
        
        // Modal functions
        function showAddModal() {
            document.getElementById('addModal').classList.add('show');
        }
        
        function closeModal() {
            document.getElementById('addModal').classList.remove('show');
        }
        
        function showEventModal() {
            document.getElementById('eventModal').classList.add('show');
        }
        
        function closeEventModal() {
            document.getElementById('eventModal').classList.remove('show');
        }
        
        function showTaskModal() {
            document.getElementById('taskModal').classList.add('show');
        }
        
        function closeTaskModal() {
            document.getElementById('taskModal').classList.remove('show');
        }
        
        function showResourceModal() {
            document.getElementById('resourceModal').classList.add('show');
        }
        
        function closeResourceModal() {
            document.getElementById('resourceModal').classList.remove('show');
        }
        
        function showPhotoUpload() {
            document.getElementById('photoModal').classList.add('show');
            setTimeout(() => {
                document.getElementById('aiResult').style.display = 'block';
                // Simulate random flower identification
                const flowers = ['Sweet William', 'Delphinium', 'Hollyhock', 'Nigella', 'Rudbeckia'];
                const randomFlower = flowers[Math.floor(Math.random() * flowers.length)];
                document.getElementById('flowerName').textContent = randomFlower;
                document.getElementById('flowerDesc').textContent = 'A beautiful addition to your cutting garden!';
            }, 2000);
        }
        
        function closePhotoModal() {
            document.getElementById('photoModal').classList.remove('show');
            document.getElementById('aiResult').style.display = 'none';
        }
        
        // Save journal entry
        function saveEntry() {
            const text = document.getElementById('journalText').value;
            const flower = document.getElementById('flowerType').value;
            const treatment = document.getElementById('treatmentInput').value;
            
            if (!text) {
                alert('Please enter what happened today!');
                return;
            }
            
            const entry = {
                id: Date.now(),
                date: new Date().toLocaleDateString('en-GB'),
                text: text,
                flower: flower,
                treatment: treatment,
                badge: null
            };
            
            // Check for eco-friendly practices
            const chemicals = ['pesticide', 'herbicide', 'fungicide', 'roundup', 'glyphosate', 'chemical', 'spray'];
            const hasChemicals = chemicals.some(chem => 
                text.toLowerCase().includes(chem) || treatment.toLowerCase().includes(chem)
            );
            
            if (hasChemicals) {
                entry.badge = 'warning';
                appData.stats.ecoScore = Math.max(0, appData.stats.ecoScore - 5);
                alert('üåø Gentle reminder: Have you tried natural alternatives? Neem oil or companion planting work brilliantly!');
            } else if (treatment.toLowerCase().includes('compost') || treatment.toLowerCase().includes('rainwater')) {
                entry.badge = 'success';
                appData.stats.ecoScore = Math.min(100, appData.stats.ecoScore + 2);
                alert('üèÜ Brilliant! You earned eco points for sustainable practices!');
            }
            
            // Update stats
            appData.stats.flowersGrown++;
            appData.stats.moneySaved += 5;
            
            appData.journal.unshift(entry);
            saveData();
            loadJournal();
            updateUI();
            closeModal();
            
            // Clear form
            document.getElementById('journalText').value = '';
            document.getElementById('treatmentInput').value = '';
        }
        
        // Load journal entries
        function loadJournal() {
            const container = document.getElementById('journalEntries');
            if (!container) return;
            
            if (appData.journal.length === 0) {
                container.innerHTML = '<div class="empty-state">No journal entries yet. Start documenting your garden journey!</div>';
                return;
            }
            
            container.innerHTML = appData.journal.map(entry => `
                <div class="journal-entry">
                    <button class="delete-btn" onclick="deleteJournalEntry(${entry.id})">√ó</button>
                    <div class="journal-date">${entry.date}</div>
                    <div class="journal-content">
                        <strong>${entry.flower}:</strong> ${entry.text}
                        ${entry.treatment ? `<br><em>Treatment: ${entry.treatment}</em>` : ''}
                    </div>
                    ${entry.badge === 'success' ? '<div class="eco-badge">üèÜ Eco-friendly practice!</div>' : ''}
                    ${entry.badge === 'warning' ? '<div class="eco-nudge">üí° Consider natural alternatives!</div>' : ''}
                </div>
            `).join('');
        }
        
        // Delete journal entry
        function deleteJournalEntry(id) {
            if (confirm('Delete this entry?')) {
                appData.journal = appData.journal.filter(e => e.id !== id);
                saveData();
                loadJournal();
            }
        }
        
        // Save calendar event
        function saveEvent() {
            const title = document.getElementById('eventTitle').value;
            const date = document.getElementById('eventDate').value;
            const type = document.getElementById('eventType').value;
            
            if (!title || !date) {
                alert('Please fill in all fields!');
                return;
            }
            
            const event = {
                id: Date.now(),
                title: title,
                date: date,
                type: type
            };
            
            appData.events.push(event);
            saveData();
            loadEvents();
            generateCalendar();
            closeEventModal();
            
            // Clear form
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventDate').value = '';
        }
        
        // Load events
        function loadEvents() {
            const container = document.getElementById('eventsList');
            if (!container) return;
            
            const sortedEvents = appData.events.sort((a, b) => new Date(a.date) - new Date(b.date));
            const futureEvents = sortedEvents.filter(e => new Date(e.date) >= new Date());
            
            if (futureEvents.length === 0) {
                container.innerHTML = '<div class="empty-state">No upcoming events. Add one to plan your garden activities!</div>';
                return;
            }
            
            container.innerHTML = futureEvents.slice(0, 5).map(event => `
                <div class="journal-entry">
                    <button class="delete-btn" onclick="deleteEvent(${event.id})">√ó</button>
                    <div class="journal-date">${new Date(event.date).toLocaleDateString('en-GB', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</div>
                    <div class="journal-content">${event.type} ${event.title}</div>
                </div>
            `).join('');
        }
        
        // Delete event
        function deleteEvent(id) {
            if (confirm('Delete this event?')) {
                appData.events = appData.events.filter(e => e.id !== id);
                saveData();
                loadEvents();
                generateCalendar();
            }
        }
        
        // Generate calendar
        function generateCalendar() {
            const container = document.getElementById('calendarGrid');
            if (!container) return;
            
            const today = new Date();
            const year = today.getFullYear();
            const month = today.getMonth();
            const firstDay = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            let html = '';
            
            // Day headers
            const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
            days.forEach(day => {
                html += `<div class="calendar-day">${day}</div>`;
            });
            
            // Empty cells for days before month starts
            for (let i = 0; i < firstDay; i++) {
                html += `<div class="calendar-day"></div>`;
            }
            
            // Days of the month
            for (let day = 1; day <= daysInMonth; day++) {
                const date = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const hasEvent = appData.events.some(e => e.date === date);
                html += `<div class="calendar-day ${hasEvent ? 'has-event' : ''}" onclick="viewDate('${date}')">${day}</div>`;
            }
            
            container.innerHTML = html;
        }
        
        // View date details
        function viewDate(date) {
            const events = appData.events.filter(e => e.date === date);
            if (events.length > 0) {
                alert(`Events on ${date}:\n\n${events.map(e => `${e.type} ${e.title}`).join('\n')}`);
            } else {
                if (confirm(`No events on ${date}. Would you like to add one?`)) {
                    document.getElementById('eventDate').value = date;
                    showEventModal();
                }
            }
        }
        
        // Save task
        function saveTask() {
            const description = document.getElementById('taskDescription').value;
            const assignee = document.getElementById('taskAssignee').value;
            const due = document.getElementById('taskDue').value;
            
            if (!description) {
                alert('Please enter a task description!');
                return;
            }
            
            const task = {
                id: Date.now(),
                description: description,
                assignee: assignee || 'Anyone',
                due: due,
                status: 'pending'
            };
            
            appData.tasks.push(task);
            saveData();
            loadTasks();
            closeTaskModal();
            
            // Clear form
            document.getElementById('taskDescription').value = '';
            document.getElementById('taskAssignee').value = '';
            document.getElementById('taskDue').value = '';
        }
        
        // Load tasks
        function loadTasks() {
            const container = document.getElementById('tasksList');
            if (!container) return;
            
            if (appData.tasks.length === 0) {
                container.innerHTML = '<div class="empty-state">No tasks yet. Add tasks to coordinate your garden work!</div>';
                return;
            }
            
            container.innerHTML = appData.tasks.map(task => `
                <div class="task-item">
                    <div class="task-info">
                        <h4>${task.description}</h4>
                        <div class="task-assignee">
                            ${task.status === 'complete' ? 'Completed by' : 'Assigned to'}: ${task.assignee}
                            ${task.due ? ` - Due: ${new Date(task.due).toLocaleDateString('en-GB')}` : ''}
                        </div>
                    </div>
                    <div class="task-status ${task.status}" onclick="toggleTask(${task.id})">
                        ${task.status === 'complete' ? '‚úÖ Done' : 'Pending'}
                    </div>
                </div>
            `).join('');
        }
        
        // Toggle task status
        function toggleTask(id) {
            const task = appData.tasks.find(t => t.id === id);
            if (task) {
                task.status = task.status === 'pending' ? 'complete' : 'pending';
                if (task.status === 'complete') {
                    appData.stats.ecoScore = Math.min(100, appData.stats.ecoScore + 1);
                    alert('Task completed! Great teamwork! üåü');
                }
                saveData();
                loadTasks();
                updateUI();
            }
        }
        
        // Save resource
        function saveResource() {
            const type = document.getElementById('resourceType').value;
            const title = document.getElementById('resourceTitle').value;
            const details = document.getElementById('resourceDetails').value;
            
            if (!title) {
                alert('Please enter a resource description!');
                return;
            }
            
            const resource = {
                id: Date.now(),
                type: type,
                title: title,
                details: details
            };
            
            appData.resources.push(resource);
            saveData();
            loadResources();
            closeResourceModal();
            
            // Clear form
            document.getElementById('resourceTitle').value = '';
            document.getElementById('resourceDetails').value = '';
        }
        
        // Load resources
        function loadResources() {
            const container = document.getElementById('resourcesList');
            if (!container) return;
            
            if (appData.resources.length === 0) {
                container.innerHTML = '<div class="empty-state">No resources shared yet. Share what you have or need!</div>';
                return;
            }
            
            container.innerHTML = appData.resources.map(resource => `
                <div class="resource-share">
                    <button class="delete-btn" onclick="deleteResource(${resource.id})">√ó</button>
                    <h4>${resource.type} ${resource.title}</h4>
                    <p>${resource.details}</p>
                </div>
            `).join('');
        }
        
        // Delete resource
        function deleteResource(id) {
            if (confirm('Remove this resource?')) {
                appData.resources = appData.resources.filter(r => r.id !== id);
                saveData();
                loadResources();
            }
        }
        
        // Save profile
        function saveProfile() {
            appData.profile.name = document.getElementById('profileNameInput').value;
            appData.profile.location = document.getElementById('profileLocationInput').value;
            appData.profile.bio = document.getElementById('profileBio').value;
            appData.profile.experience = document.getElementById('profileExperience').value;
            
            saveData();
            updateUI();
            alert('Profile saved successfully!');
        }
        
        // Add custom flower to guide
        function addToGuide() {
            const flowerName = document.getElementById('flowerName').textContent;
            const flowerDesc = document.getElementById('flowerDesc').textContent;
            
            const customFlower = {
                id: Date.now(),
                name: flowerName,
                description: flowerDesc,
                emoji: 'üå∫'
            };
            
            appData.customFlowers.push(customFlower);
            saveData();
            loadCustomFlowers();
            closePhotoModal();
            alert(`${flowerName} added to your flower guide!`);
        }
        
        // Load custom flowers
        function loadCustomFlowers() {
            const container = document.getElementById('customFlowers');
            if (!container) return;
            
            container.innerHTML = appData.customFlowers.map(flower => `
                <div class="flower-card">
                    <h3><span class="flower-emoji">${flower.emoji}</span> ${flower.name}</h3>
                    <p>${flower.description}</p>
                    <button class="delete-btn" onclick="deleteCustomFlower(${flower.id})">√ó</button>
                </div>
            `).join('');
        }
        
        // Delete custom flower
        function deleteCustomFlower(id) {
            if (confirm('Remove this flower from your guide?')) {
                appData.customFlowers = appData.customFlowers.filter(f => f.id !== id);
                saveData();
                loadCustomFlowers();
            }
        }
        
        // Add journal entry helper
        function addJournalEntry() {
            const journalNav = document.querySelector('.nav-item:nth-child(4)');
            showScreen('journal', journalNav);
            showAddModal();
        }
        
        // Update time
        function updateTime() {
            const now = new Date();
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            document.getElementById('time').textContent = `${hours}:${minutes}`;
        }
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            loadCustomFlowers();
            updateTime();
            setInterval(updateTime, 60000);
            
            // Pollinator map interaction
            document.querySelectorAll('.map-cell').forEach(cell => {
                cell.addEventListener('click', function() {
                    if (this.textContent === '-') {
                        const flowers = ['üåª', 'üåº', 'üå∏', 'üå∫', 'üå∑'];
                        this.textContent = flowers[Math.floor(Math.random() * flowers.length)];
                        this.classList.add('pollinator');
                        appData.stats.pollinators++;
                        saveData();
                        updateUI();
                        alert('üêù Great choice! This spot is now marked for pollinator-friendly plants.');
                    }
                });
            });
        });
    </script>
</body>
</html>
